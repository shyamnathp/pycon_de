<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>Deploying your Python application to Android</title>

  <link rel="stylesheet" href="dist/reset.css">
  <link rel="stylesheet" href="dist/reveal.css">
  <link rel="stylesheet" href="css/qt-theme.css" id="theme">
  <link rel="stylesheet" href="css/qt.css" id="theme">
  <link rel="stylesheet" href="css/extras.css">

  <!-- Theme used for syntax highlighted code -->
  <link rel="stylesheet" href="plugin/highlight/monokai.css">

  <!-- Printing and PDF exports -->
  <script>
  if( window.location.search.match( /print-pdf/gi ) ) {
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = 'css/print/pdf.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  }
  </script>
</head>
<body>
  <div class="reveal">
    <div class="slides">
      <!--***************************************************************************-->
      <section>
        <div id="left">
          <!-- Fix-me: Change to C++ blue -->
          <h3>Deploying your <i class="yellow">Python</i> application to <i class="android-green">Android</i></h3>
          <hr style="width: 70px; border: 1px solid #ff00ff; background-color: #ff00ff; margin-left: 0px;"/>
        <p style="font-size: 80%;">
          <i class="qt-green">Shyamnath</i> Premnadh<br/>
          <img class="clean-img" src="img/github_white.png">
          <img class="clean-img" src="img/linkedin.png">
        </p>
        </div>
        <div style="width:19% !important" id="right30">
          <img style="width: 80%;margin-right: 50px;" src="img/python.svg" />
          <img style="width: 80%;margin-right: 50px;" src="img/Android_Robot.png" />
        </div>
      </section>
      <!--***************************************************************************-->

      <section>
        <h2><i class="green">Hi</i><i class="yellow">,</i> there üëã</h2>
        <div id="left70">
          <p style="text-align: left;">
          <br>
          <font style="font-size: 80%;">Shyamnath Premnadh <i class="yellow">aka</i> <i class="qt-green">Shyam</i></font>
          <br>
          <font style="font-size: 60%;">Qt for Python</font> <br>
          <font style="font-size: 60%;">Senior Software Engineer <i class="qt-green">@ TQtc</i></font>
          </p>
        </div>
        <div id="right30">
          <p style="width: 60%;">
            <img src="img/pyside.png" />
            <img src="img/qt_green.png" />
          </p>
        </div>
      </section>

      <section>
        <h2>Why is <i class="android-green">Android</i> an important platform ?ü¶æ</h2>
        <img style="width: 70%;" src="img/os_barplot.png" />
      </section>

      <section>
        <h3>Is <i class="yellow">Python</i> a good alternative for Android development? ü§î</h3>
        <h4 class="fragment" style="text-align: center;">
          Currently, <i class="yellow">NO</i>
        </h4>
        <h4 class="fragment" style="text-align: center;">
          But, why? ü§∑‚Äç‚ôÇÔ∏è
        </h4>
        <aside class="notes">
          Python is the most popular language. But, it is not the best choice for Android development.
        </aside>
      </section>

      <section data-auto-animate>
        <h3><i class="yellow">Python</i> üö´ <i class="android-green">Android</i></h3>
        <div id="left_center">
          <ol style="font-size: 70%;">
            <li>No official support for Android in CPython</li>
            <li>No native support for Python with Android SDK</li>
            <li>The app should bundle the Python binaries</li>
          </ol>
        </div>
        <aside class="notes">
          Among the more obvious reasons like native languages like Java and Kotlin are faster, there are other reasons like:
          1.One has to cross-compile CPython(since 3.6) to Android to obtain the necessary binaries, and Android has 4 targets. This is inspite of projects like Kivy, BeeWare existing for years
          2.Applications should bundle the Python runtime, leading to bigger binary sizes
          3.No native support for Python with Android NDK - Android works around JVM. So, you basically have to find a way to interface betweem Java and Python.
        </aside>
      </section>

      <section data-auto-animate>
        <h3><i class="yellow">Python</i> üö´ <i class="android-green">Android</i></h3>
        <div id="left_center">
          <ol style="font-size: 70%;">
            <li>No official support for Android in CPython</li>
            <li>No native support for Python with Android SDK</li>
            <li>The app should bundle the Python binaries</li>
          </ol>
          <h3> But .... </h3>
        </div>
      </section>

      <section data-auto-animate>
        <h3><i class="yellow">Python</i> ü´∂ <i class="android-green">Android</i></h3>
        <div id="left_center">
          <ol style="font-size: 70%;">
            <li><i class="qt-green">No official support for Android in CPython</i> - <br> <i class="yellow">PEP 738: Adding Android as a supported platform - Malcolmn Smith</i></li>
            <li><i class="qt-green">No native support for Python with Android SDK</i> - <i class="yellow">Toga, PySide6, PyQt6</i></li>
            <li><i class="red">The app should bundle the Python binaries</i></li>
          </ol>
        </div>
      </section>

      <section data-auto-animate>
        <h3>GUI frameworks with Android support</h3>
        <div id="left_center">
          <ol style="font-size: 70%;">
            <li>Kivy</li>
            <li>Flet</li>
            <li>PySide6</li>
            <li>PyQt6</li>
            <li>Toga</li>
          </ol>
        </div>
        <aside class="notes">
          1. You can ofcourse have a webview application with react native frontend and python backend but having a standalone GUI framework helps in unifited development with just using Python.
          It also enables more fine grained control over UI components and interactions.
          2. All of these frameworks are cross-platform. If ones task is to develop only an Android appliction, then don't use Python.
        </aside>
      </section>

      <section data-auto-animate>
        <h3>Comparsion with an example</h3>
        <div id="left_center">
          <ol style="font-size: 70%;">
            <li><i class="qt-green">Kivy</i></li>
            <li><i class="qt-green">Flet</i></li>
            <li><i class="qt-green">PySide6</i></li>
            <li>PyQt6</li>
            <li>Toga</li>
          </ol>
        </div>
        <aside class="notes">
          1. Ease of learning
          2. Popularity of the framework
          3. Community support
          4. Licensing
        </aside>
      </section>

      <section>
        <h3>Contact Manager Application</h3>
        <div id="left_center">
          <ul style="font-size: 70%;">
            <li>Concise understanding of User Interaction</li>
            <li>Simple Data Model</li>
            <li>Event Handling</li>
            <li>Navigation and Layout</li>
          </ul>
        </div>
        <aside class="notes">
          Basic concepts of an app are tested.
          - A contact manager application involves various user interactions such as listing contacts, adding new contacts, and removing existing ones.
            This allows beginners to understand how user input is handled and how information is displayed on the user interface.
          - Contacts typically have a straightforward data structure, consisting of fields such as name, phone number, email, etc.
            Working with such a simple data model enables beginners to focus on learning the GUI framework without getting bogged down by complex data structures.
          - Interactions such as tapping on a contact to view details or selecting an option to delete a contact require event handling.
            Implementing these interactions provides beginners with hands-on experience in handling user events and responding to them appropriately.
          - A contact manager application often involves multiple screens for listing contacts, viewing contact details, and adding or editing contacts.
            This allows beginners to explore navigation patterns and layout management within the GUI framework.
        </aside>
      </section>

      <section>
        <h3>Flet</h3>
        <div id="left_center">
          <ul style="font-size: 70%;">
            <li>Server-Driven UI framework based on Flutter</li>
            <li>Minimal API - Fully in Python</li>
            <li>Deploying as a web app on the browser or a progressive web app (PWA)</li>
            <li>Super active and responsive community - Discord, Github Discussions, Mailing list etc</li>
            <li>Apache-2.0 license</li>
          </ul>
        </div>
        <aside class="notes">
          - new kid in the block, as such no baggage.
          - increasing content in stackoverflow
          - Released in 2022
          - Minimal API making it easier to learn as compared to PySide6 which still adhers to the Qt rules.
          - How does flet work - uses Flutter behind the scenes to build and package UI clients that communicate with the Python backend and render the UI. It keeps developers away from Flutter clients, they are ready-made and not intended to be changed.
          - https://flet.dev/docs/guides/python/packaging-app-for-distribution/#how-it-works
          - https://flet.dev/blog/flet-mobile-strategy#flet-approach
        </aside>
      </section>

      <section>
        <section>
          <h3>Contact Manager Application - Flet</h3>
          <div class="image-container">
            <img src="img/flet_main.png" />
            <img src="img/flet_expand.png" />
            <img src="img/flet_add.png" />
          </div>
        </section>

        <section>
          <h3>API</h3>
          <div id="left">
          <ul style="font-size: 70%;">
            <li>Easy to use
              <pre style="font-size: 50%; width: 100%; text-align: left;">
                <code data-line-numbers="23|18|15-16|1-3|4-7|8-9|10|11-12" class="python" data-trim data-noescape>
                    class AddContact(UserControl):
                    ...
                    def build(self):
                        self.name = TextField(label="Name", icon=icons.PERSON)
                        self.address = TextField(label="Address", icon=icons.LOCATION_CITY)
                        self.city = TextField(label="City", icon=icons.LOCATION_CITY)
                        self.mobile = TextField(label="Mobile", icon=icons.PHONE)
                        submit_button = ElevatedButton(text="Submit", on_click=self.add_contact)
                        cancel_button = ElevatedButton(text="Cancel", on_click=self.close_dlg)
                        self.submit_cancel_button = Row([submit_button, cancel_button])
                        return Column([self.name, self.address, self.city, self.mobile,
                                      self.submit_cancel_button])

                    ...
                    add_dialog = ft.AlertDialog(modal=True, title=ft.Text("Add new contact"),
                                                content=AddContact(contacts_dict))

                    def add_pressed(e):
                      page.dialog = add_dialog
                      add_dialog.open = True
                      page.update()

                    page.floating_action_button = FloatingActionButton(icon=ft.icons.ADD, on_click=add_pressed)
              </code>
              </pre>
            </li>
          </ul>
          </div>
          <aside class="notes">
            1. Super easy to use - no confusing names, you get what you write
          </aside>
        </section>

        <section>
          <h3>How to deploy?</h3>
          <div id="left">
          <ul style="font-size: 70%;">
            <li>Prerequisites - Flutter SDK</li>
            <li>Run the command
              <pre style="font-size: 50%; width: 100%; text-align: left;">
                <code data-trim data-noescape>
                  flet build apk/aab
                </code>
              </pre>
            </li>
          </ul>
          </div>
          <div id="rightl">
            <p class="noteBoxes type4" style="font-size: 40%;">
            <img src="img/lightbulb.svg" class="note-box-icon"/>
            apk (Android Application Package)- Packaging format <br>
            aab (Android App Bundle)- Publishing format
            </p>
          </div>
          <aside class="notes">
            - Among other dependencies Flutter SDK is a major prerequisite
          </aside>
        </section>
      </section>

      <section>
        <h3>PySide6</h3>
          <div id="left_center">
          <ul style="font-size: 70%;">
            <li>Official bindings for the Qt framework (since 1995 üòÆ)</li>
            <li>
              Two ways to create GUIs
              <ul style="font-size: 65%;">
              <li>Qt Widgets - Python and C++</li>
              <li>Qt Quick - QML and Python/C++</li>
              </ul>
            </li>
            <li>Interactive tool to create designs
              <ul style="font-size: 65%;">
                <li>Qt Widgets - Qt Designer</li>
                <li>Qt Quick - Qt Design Studio</li>
                </ul>
            </li>
            <li>Native feel and look</li>
            <li>Community Editon(LGPLv3/GPLv3) and Commercial Edition</li>
          </ul>
        </div>
        <aside class="notes">
          - Qt framework exists since 1995 and is cross-platform. QtQuick was introduced in 2012.
          - QML is a scripting language. QtQuick is more favoured for mobile devices.
          - for QML files, the functionality is done with C++ i.e. data classes, adding functionality to buttons etc.
          - Writing code with QML instead of C++ is more manageable.
          - QML supports javascript constructs. You can even have javascript code inside QML files.
          - QML files have a .qml extension.
          - Huge learning curve for Python developers.
        </aside>
    </section>

    <section>
      <section>
        <h3>Contact Manager Application - PySide</h3>
        <div class="image-container">
          <img src="img/pyside_list.png" />
          <img src="img/pyside_expand.png" />
          <img src="img/pyside_add.png" />
        </div>
      </section>

      <section>
        <h3>API</h3>
        <div id="left70">
        <ul style="font-size: 70%;">
          <li>More features and years of community support
            <pre style="font-size: 50%; width: 100%; text-align: left;">
            <code  data-line-numbers="" data-trim data-noescape>
              ColumnLayout {
                id: grid
                ...

                TextField {
                  id: fullName
                  focus: true
                  Layout.fillWidth: true
                  Layout.minimumWidth: grid.minimumInputSize
                  Layout.alignment: Qt.AlignLeft | Qt.AlignBaseline
                  placeholderText: qsTr("Full Name")
                }

                TextField {
                    id: address
                    Layout.fillWidth: true
                    Layout.minimumWidth: grid.minimumInputSize
                    Layout.alignment: Qt.AlignLeft | Qt.AlignBaseline
                    placeholderText: qsTr("Address")
                }
                ...
              }

              Dialog {
                id: dialog

                function createContact() {
                    form.fullName.clear();
                    ...
                    dialog.title = qsTr("Add Contact");
                    dialog.open();
                }

                contentItem: ContactForm { id: form}
              }

              RoundButton {
                text: qsTr("+")
                highlighted: true
                anchors.margins: 10
                anchors.right: parent.right
                anchors.bottom: parent.bottom
                onClicked: {
                    currentContact = -1
                    contactDialog.createContact()
                }
            }
            </code>
            </pre>
          </li>
        </ul>
        </div>
        <aside class="notes">
          1. You can create custom text field using TextFieldStyle
          2. You can ofcourse do this directly with widgets in PySide6. The Textfield becomes a QTextField class and you can set the properties directly.
             But, things like RoundButton that exists in QtQuick does not exists in Widgets. Manually creating it required creating a stylesheet which is a lot of code.
        </aside>
      </section>

      <section>
        <h3>Role of Python?</h3>
        Loading QML files from Python
        <pre style="font-size: 50%; width: 100%; text-align: left;">
          <code data-line-numbers="" class="python" data-trim data-noescape>
            if __name__ == '__main__':
              app = QGuiApplication(sys.argv)
              engine = QQmlApplicationEngine()
              engine.addImportPath(Path(__file__).parent)
              engine.loadFromModule("Contact", "ContactList") #loads ContactList.qml
              if not engine.rootObjects():
                  sys.exit(-1)
              ex = app.exec()
              del engine
              sys.exit(ex)
        </code>
        </pre>
        Using Python object in QML
        <div id="left">
        <pre style="text-align: left;">
          contactmodel.py
        </pre>
        <pre style="font-size: 50%; width: 100%; text-align: left;">
          <code data-line-numbers="" class="python" data-trim data-noescape>
            QML_IMPORT_NAME = "Backend"
            QML_IMPORT_MAJOR_VERSION = 1


            @QmlElement
            class ContactModel(QAbstractListModel):
            ...
        </code>
        </pre>
        </div>
        <div id="right">
        <pre style="text-align: left;">
        contactview.qml
        </pre>
        <pre style="font-size: 50%; width: 100%; text-align: left;">
          <code data-line-numbers="" class="qml" data-trim data-noescape>
            import Backend

            ListView {
                id: listView
                ....
                model: ContactModel {
                    id: contactModel
                }
                ....
              }
        </code>
        </pre>
        </div>
      </section>

      <section>
        <h3>How to deploy?</h3>
        <ul style="font-size: 70%;">
          <li>Prerequisites
            <ul style="font-size: 70%;">
              <li>Built custom Android wheels (Soon to go away)</li>
              <li>buildozer and python-for-android (kivy)</li>
              <li>Main entry point is `main.py`</li>
          </li>
        </ul>
        <li>Run the command
          <pre style="font-size: 50%; width: 100%; text-align: left;">
            <code data-trim data-noescape>
              pyside6-android-deploy --wheels-pydie=`path-to-android-wheel` --wheel-shiboken=`path-to-android-wheel`
            </code>
          </pre>
        </li>
        </ul>
        <aside class="notes">
          - Among other dependencies Flutter SDK is a major prerequisite

        </aside>
      </section>
    </section>


    <section>
      <h3>Kivy</h3>
      <div id="left_center">
        <ul style="font-size: 70%;">
          <li>Popular since 2012</li>
          <!-- add github stars -->
          <li>Easy to get started with</li>
          <li>Two ways to create GUI
            <ul style="font-size: 65%;">
              <li>Python code</li>
              <li>Kv language</li>
            </ul>
          </li>
          <li>More suited for games than tradional applications</li>
          <li>MIT license</li>
          <li>Community - Discord, Stackoverflow, Reddit, Github Issue Tracker</li>
        </ul>
      </div>
      <aside class="notes">
        - Kivy provides robust support for 2D graphics and animations, which are essential for game development. Its graphics engine is optimized for rendering dynamic and visually appealing game scenes with smooth animations, making it well-suited for creating interactive game interfaces.
        - One of the aims of the Kivy language is to separate the concerns of presentation and logic. The presentation (layout) side is addressed by your .kv file and the logic by your .py file.
        - Kv language make it simple to separate the interface design from application logic
        - No material design by default. But KivyMD provides material design components.
      </aside>
  </section>

  <section>
    <section>
      <h3>Contact Manager Application - PySide</h3>
      <div class="image-container">
        <img src="img/pyside_list.png" />
        <img src="img/pyside_expand.png" />
        <img src="img/pyside_add.png" />
      </div>
    </section>

    <section>
      <h3>API</h3>
      <div id="left">
      Using Kivy and KivyMD
      <pre style="font-size: 45%; width: 100%; text-align: left;">
      <code  data-line-numbers="" data-trim data-noescape>
        <.MainWindow>:
          MDBoxLayout:
              orientation: 'vertical'
              ....
              # Creating the Float button
              FloatButton:
                  text: '+'
                  markup: True
                  background_color: 1, 0, 1, 0
      </code>
      </pre>
      </div>
      <aside class="notes">
        1. You can create custom text field using TextFieldStyle
        2. You can ofcourse do this directly with widgets in PySide6. The Textfield becomes a QTextField class and you can set the properties directly.
           But, things like RoundButton that exists in QtQuick does not exists in Widgets. Manually creating it required creating a stylesheet which is a lot of code.
        3. No API examples and usage examples. The documentation is not as good as PySide6.
      </aside>
    </section>

    <section>
      <h3>Role of Python?</h3>
      Loading QML files from Python
      <pre style="font-size: 50%; width: 100%; text-align: left;">
        <code data-line-numbers="" class="python" data-trim data-noescape>
      </code>
      </pre>
    </section>

    <section>
      <h3>How to deploy?</h3>
      <ul style="font-size: 70%;">
        <li>Prerequisites
          <ul style="font-size: 70%;">
            <li>Built custom Android wheels (Soon to go away)</li>
            <li>buildozer and python-for-android (kivy)</li>
            <li>Main entry point is `main.py`</li>
        </li>
      </ul>
      <li>Run the command
        <pre style="font-size: 50%; width: 100%; text-align: left;">
          <code data-trim data-noescape>
            pyside6-android-deploy --wheels-pydie=`path-to-android-wheel` --wheel-shiboken=`path-to-android-wheel`
          </code>
        </pre>
      </li>
      </ul>
      <aside class="notes">
        - Among other dependencies Flutter SDK is a major prerequisite

      </aside>
    </section>
  </section>

  <section data-auto-animate>
    <h3>Python Packages Support</h3>
    <!-- <div id="left_center"> -->
    <p style="font-size: 80%;">
      Pure Python Packages - Platform Independent
    </p>
    <!-- </div> -->
  </section>

  <section data-auto-animate>
    <h3>Package Support</h3>
    <p style="font-size: 80%;">
      Pure Python Packages - Platform Independent
    </p>
    <p style="font-size: 80%;">
      What about Native Python Packages?
      </p>
    <aside class="notes">
      1. Native Python packages are platform dependent. They contain compiled code that is specific to the platform on which they are installed. eg: numpy, pydantic, PySide6
    </aside>
  </section>

  <section data-auto-animate>
    <h3>Package Support</h3>
    <p style="font-size: 80%;">
      What about Native Python Packages?
    </p>
  </section>


  <section>
    <div id="left">
      <!-- Fix-me: Change to C++ blue -->
      <h3>How <i style="color:#00589D">C++</i> and <i class="yellow">Python</i> can strive together</h3>
      <hr style="width: 70px; border: 1px solid #ff00ff; background-color: #ff00ff; margin-left: 0px;"/>
    <p style="font-size: 80%;">
      <i class="qt-green">Shyamnath</i> Premnadh<br/>
      <img class="clean-img" src="img/github_white.png">
      <img class="clean-img" src="img/linkedin.png">
    </p>
    </div>
    <div style="width:19% !important" id="right30">
      <img style="width: 80%;margin-right: 50px;" src="img/python.svg" />
      <img style="width: 80%;margin-right: 50px;" src="img/ISO_C++_Logo.svg.png" />
    </div>
  </section>
    </div>
  </div>

  <script src="dist/reveal.js"></script>
  <script src="plugin/notes/notes.js"></script>
  <script src="plugin/markdown/markdown.js"></script>
  <script src="plugin/highlight/highlight.js"></script>
  <script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/
    Reveal.initialize({
      hash: true,
      transitionSpeed: 'fast',

      // Learn about plugins: https://revealjs.com/plugins/
      plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
    });
  </script>
  <!-- Hack to have a footer-->

  <!-- 1. Style header/footer <div> so they are positioned as desired: in css/qt.css -->
  <!-- 2. Create hidden header/footer <div> -->
  <div id="hidden" style="display:none;">
    <div id="header">
      <div id="header-left"><img src="img/qt.png" style="width: 100px;margin-left: 30px;" /></div>
      <div id="footer-left"><img src="img/pycon_de.png" style="width: 40px;" /></div>
      <div id="header-right"></div>
      <div id="footer-left">
        <p style="font-size: 14pt;margin-left: 40px;">
          <i class="white">PyCon DE | April 23, 2024</i>
      </div>
  </div>

  <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
  <script type="text/javascript">
    // 3. On Reveal.js ready event, copy header/footer <div> into each `.slide-background` <div>
    var header = $('#header').html();
    if ( window.location.search.match( /print-pdf/gi ) ) {
      Reveal.addEventListener( 'ready', function( event ) {
        $('.slide-background').append(header);
      });
    }
    else {
      $('div.reveal').append(header);
     }
  </script>
</body>
</html>
